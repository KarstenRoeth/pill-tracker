<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Karsten's Pill Tracker</title>
  <meta name="theme-color" content="#f0f4f2" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-title" content="Pill Tracker" />
  <link rel="apple-touch-icon" href="assets/apple-touch-icon.png" />
  <link rel="icon" href="assets/icon-192.png" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="stylesheet" href="styles.css?v=3" />
</head>
<body>
  <div class="app">

    <header class="topbar">
      <div class="brand">
        <div class="pill-icon" aria-hidden="true">
          <svg viewBox="0 0 64 64" role="img" focusable="false">
            <defs>
              <linearGradient id="cap" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#ffb199" />
                <stop offset="1" stop-color="#ff8c8c" />
              </linearGradient>
              <linearGradient id="body" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#7fd3b8" />
                <stop offset="1" stop-color="#4fa8a3" />
              </linearGradient>
            </defs>
            <g transform="rotate(-25 32 32)">
              <rect x="10" y="18" width="44" height="28" rx="14" fill="url(#cap)" />
              <path d="M32 18h22c7.7 0 14 6.3 14 14s-6.3 14-14 14H32z" fill="url(#body)" />
              <rect x="31" y="18" width="2" height="28" fill="#ffffff" opacity="0.7" />
            </g>
          </svg>
        </div>
        <h1>Pill Tracker</h1>
      </div>
      <div class="actions">
        <button id="todayBtn" class="btn secondary">Heute</button>
        <button id="undoBtn" class="btn ghost" disabled title="Rückgängig">↩</button>
        <button id="settingsBtn" class="btn ghost" title="Einstellungen">⚙</button>
      </div>
    </header>

    <div class="week-nav">
      <button id="prevWeek" class="btn icon" aria-label="Vorherige Woche">‹</button>
      <div id="weekLabel" class="week-label"></div>
      <button id="nextWeek" class="btn icon" aria-label="Nächste Woche">›</button>
    </div>

    <section class="week-card" id="weekGrid"></section>

    <section class="stats-card">
      <div class="stats-header">Monatsübersicht</div>
      <div class="stats-grid">
        <div class="stat">
          <div class="stat-label">Eingenommen</div>
          <div id="statTaken" class="stat-value">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Offen</div>
          <div id="statOpen" class="stat-value">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Quote</div>
          <div id="statRate" class="stat-value">0%</div>
        </div>
        <div class="stat">
          <div class="stat-label">Streak</div>
          <div id="statStreak" class="stat-value">0</div>
        </div>
        <div class="stat">
          <div class="stat-label">Bester Streak</div>
          <div id="statBestStreak" class="stat-value">0</div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div id="statusText" class="status">Lokale Speicherung aktiv.</div>
      <div class="hint">Keine Cloud · Keine Anmeldung</div>
    </footer>
  </div>

  <!-- Settings Overlay -->
  <div id="settingsOverlay" class="overlay hidden" role="dialog" aria-modal="true">
    <div class="overlay-card">
      <h2>Einstellungen</h2>
      <p class="settings-desc">Wann nimmst du täglich Tabletten?<br>Tippe die Zeitpunkte an, um sie ein- oder auszuschalten.</p>
      <div class="slot-selector">
        <button class="slot-btn" data-slot="0">Morgens</button>
        <button class="slot-btn" data-slot="1">Mittags</button>
        <button class="slot-btn" data-slot="2">Abends</button>
        <button class="slot-btn" data-slot="3">Nachts</button>
      </div>
      <div class="settings-legend">
        <span class="legend-item"><span class="legend-dot done"></span> Eingenommen</span>
        <span class="legend-item"><span class="legend-dot missed"></span> Nicht eingenommen</span>
        <span class="legend-item"><span class="legend-dot inactive"></span> Kein Bedarf</span>
      </div>
      <button id="closeSettings" class="btn" style="margin-top:20px;width:100%">Fertig</button>
    </div>
  </div>

  <script src="app.js?v=3"></script>
</body>
</html>
